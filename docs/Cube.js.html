<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Cube.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Cube.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* exported Cube */

/**
 * Cube Class
 */
class Cube{
	/**
     * Creates an instance of Cube
	 * @param {String|Element} target           The element that will contain the Cube
	 * @param {Object}         parameters       Parameters holder
	 * @param {Number}         parameters.ratio Ratio at which mousemoves will impact the rotation of the cube
     */
	constructor(target, parameters){
		/**
		 * Cube elements' parent
		 * @type {Element}
		 */
		this.parent = target instanceof Element ? target : document.querySelector(target);

		this._parameters = {
			ratio: 2,
			...parameters
		};

		this._build();
		this._listen();
	}

	/**
	 * Build the Cube
	 * @private
	 */
	_build(){
		this.parent.classList.add('css3-cube-wrapper');
		this.parent.innerHTML = `
			&lt;div class="css3-cube" style="transform: translateZ(-50px) rotateX(0deg) rotateY(0deg);">
				&lt;header class="cube-face" data-face="top">&lt;/header>
				&lt;section class="cube-face" data-face="front">&lt;/section>
				&lt;aside class="cube-face" data-face="right">&lt;/aside>
				&lt;section class="cube-face" data-face="back">&lt;/section>
				&lt;aside class="cube-face" data-face="left">&lt;/aside>
				&lt;footer class="cube-face" data-face="bottom">&lt;/footer>
			&lt;/div>
		`;

		this.element = this.parent.firstElementChild;
	}

	/**
	 * Listen to mouse events
	 * @private
	 */
	_listen(){
		const origin = {
			x: 0,
			y: 0
		},
		rotation = {
			x: 0,
			y: 0
		};
		let dragging = false;

		// Start events
		const handleMousedown = e => {
			dragging = true;

			// Remember the drag origin
			origin.x = e.pageX;
			origin.y = e.pageY;

			// Remember the drag original rotation
			rotation.x = +this.element.style.transform.replace(/^.*rotateX\((-?\d+)deg\).*$/u, '$1');
			rotation.y = +this.element.style.transform.replace(/^.*rotateY\((-?\d+)deg\).*$/u, '$1');
		};
		
		this.parent.addEventListener('mousedown', handleMousedown);
		this.parent.addEventListener('dragstart', handleMousedown);

		// Move events
		const handleMouseMove = e => {
			if(dragging){
				const mouseDifference = {
					x: (e.pageX - origin.x) * this._parameters.ratio,
					y: (e.pageY - origin.y) * this._parameters.ratio
				};

				this.element.style.transform = `translateZ(-50px) rotateX(${rotation.x - mouseDifference.y}deg) rotateY(${rotation.y + mouseDifference.x}deg)`;
			}
		};

		document.addEventListener('mousemove', handleMouseMove);
		document.addEventListener('dragover', handleMouseMove);

		// End events
		const handleMouseUp = () => {
			dragging = false;
		};

		this.element.addEventListener('dragend', handleMouseUp);
		window.addEventListener('mouseup', handleMouseUp);

		window.addEventListener('mouseout', e => {
			if(e.relatedTarget === null) dragging = false;
		});
	}
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Cube.html">Cube</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Thu Jul 30 2020 08:42:37 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
